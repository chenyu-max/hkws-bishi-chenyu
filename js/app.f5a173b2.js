(function(){var e={46700:function(e,t,s){var a={"./af":72398,"./af.js":72398,"./ar":44207,"./ar-dz":33382,"./ar-dz.js":33382,"./ar-kw":96525,"./ar-kw.js":96525,"./ar-ly":17098,"./ar-ly.js":17098,"./ar-ma":56483,"./ar-ma.js":56483,"./ar-sa":73961,"./ar-sa.js":73961,"./ar-tn":27401,"./ar-tn.js":27401,"./ar.js":44207,"./az":70903,"./az.js":70903,"./be":41174,"./be.js":41174,"./bg":94615,"./bg.js":94615,"./bm":20225,"./bm.js":20225,"./bn":69751,"./bn-bd":30544,"./bn-bd.js":30544,"./bn.js":69751,"./bo":46894,"./bo.js":46894,"./br":38566,"./br.js":38566,"./bs":40959,"./bs.js":40959,"./ca":52683,"./ca.js":52683,"./cs":14231,"./cs.js":14231,"./cv":999,"./cv.js":999,"./cy":64302,"./cy.js":64302,"./da":63601,"./da.js":63601,"./de":95509,"./de-at":42479,"./de-at.js":42479,"./de-ch":95948,"./de-ch.js":95948,"./de.js":95509,"./dv":19838,"./dv.js":19838,"./el":55113,"./el.js":55113,"./en-au":27377,"./en-au.js":27377,"./en-ca":29626,"./en-ca.js":29626,"./en-gb":55912,"./en-gb.js":55912,"./en-ie":12931,"./en-ie.js":12931,"./en-il":52243,"./en-il.js":52243,"./en-in":9779,"./en-in.js":9779,"./en-nz":49813,"./en-nz.js":49813,"./en-sg":54318,"./en-sg.js":54318,"./eo":74957,"./eo.js":74957,"./es":99243,"./es-do":67409,"./es-do.js":67409,"./es-mx":75188,"./es-mx.js":75188,"./es-us":16927,"./es-us.js":16927,"./es.js":99243,"./et":87731,"./et.js":87731,"./eu":21072,"./eu.js":21072,"./fa":29462,"./fa.js":29462,"./fi":29838,"./fi.js":29838,"./fil":73626,"./fil.js":73626,"./fo":6421,"./fo.js":6421,"./fr":70974,"./fr-ca":77780,"./fr-ca.js":77780,"./fr-ch":59719,"./fr-ch.js":59719,"./fr.js":70974,"./fy":98373,"./fy.js":98373,"./ga":83861,"./ga.js":83861,"./gd":44896,"./gd.js":44896,"./gl":20739,"./gl.js":20739,"./gom-deva":86737,"./gom-deva.js":86737,"./gom-latn":31979,"./gom-latn.js":31979,"./gu":32001,"./gu.js":32001,"./he":99671,"./he.js":99671,"./hi":82038,"./hi.js":82038,"./hr":11228,"./hr.js":11228,"./hu":30087,"./hu.js":30087,"./hy-am":83569,"./hy-am.js":83569,"./id":91977,"./id.js":91977,"./is":86853,"./is.js":86853,"./it":82140,"./it-ch":25626,"./it-ch.js":25626,"./it.js":82140,"./ja":24123,"./ja.js":24123,"./jv":26457,"./jv.js":26457,"./ka":30638,"./ka.js":30638,"./kk":16823,"./kk.js":16823,"./km":9493,"./km.js":9493,"./kn":11288,"./kn.js":11288,"./ko":29663,"./ko.js":29663,"./ku":70805,"./ku.js":70805,"./ky":87550,"./ky.js":87550,"./lb":76272,"./lb.js":76272,"./lo":99135,"./lo.js":99135,"./lt":91452,"./lt.js":91452,"./lv":35782,"./lv.js":35782,"./me":32181,"./me.js":32181,"./mi":50258,"./mi.js":50258,"./mk":35715,"./mk.js":35715,"./ml":50538,"./ml.js":50538,"./mn":83086,"./mn.js":83086,"./mr":75663,"./mr.js":75663,"./ms":35100,"./ms-my":92663,"./ms-my.js":92663,"./ms.js":35100,"./mt":50880,"./mt.js":50880,"./my":19099,"./my.js":19099,"./nb":38709,"./nb.js":38709,"./ne":32201,"./ne.js":32201,"./nl":21016,"./nl-be":61681,"./nl-be.js":61681,"./nl.js":21016,"./nn":25330,"./nn.js":25330,"./oc-lnc":27132,"./oc-lnc.js":27132,"./pa-in":30251,"./pa-in.js":30251,"./pl":93948,"./pl.js":93948,"./pt":89836,"./pt-br":36421,"./pt-br.js":36421,"./pt.js":89836,"./ro":28443,"./ro.js":28443,"./ru":20004,"./ru.js":20004,"./sd":54510,"./sd.js":54510,"./se":63148,"./se.js":63148,"./si":10542,"./si.js":10542,"./sk":77637,"./sk.js":77637,"./sl":85852,"./sl.js":85852,"./sq":90611,"./sq.js":90611,"./sr":10242,"./sr-cyrl":90302,"./sr-cyrl.js":90302,"./sr.js":10242,"./ss":91367,"./ss.js":91367,"./sv":42927,"./sv.js":42927,"./sw":5240,"./sw.js":5240,"./ta":82692,"./ta.js":82692,"./te":42132,"./te.js":42132,"./tet":88300,"./tet.js":88300,"./tg":37211,"./tg.js":37211,"./th":14050,"./th.js":14050,"./tk":53849,"./tk.js":53849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":23650,"./tlh.js":23650,"./tr":44195,"./tr.js":44195,"./tzl":55529,"./tzl.js":55529,"./tzm":17520,"./tzm-latn":60298,"./tzm-latn.js":60298,"./tzm.js":17520,"./ug-cn":84134,"./ug-cn.js":84134,"./uk":95456,"./uk.js":95456,"./ur":15679,"./ur.js":15679,"./uz":89277,"./uz-latn":66446,"./uz-latn.js":66446,"./uz.js":89277,"./vi":53992,"./vi.js":53992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":12899,"./yo.js":12899,"./zh-cn":94017,"./zh-cn.js":94017,"./zh-hk":84831,"./zh-hk.js":84831,"./zh-mo":32881,"./zh-mo.js":32881,"./zh-tw":30057,"./zh-tw.js":30057};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id=46700},93617:function(e,t,s){"use strict";var a=s(28935),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("checkComponents")],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"check-components-container"},[s("div",{staticClass:"left-container"},[s("div",{staticClass:"title"},[e._v(" 监控点所在区域 ")]),s("a-tree",{attrs:{"auto-expand-parent":e.autoExpandParent,"replace-fields":e.replaceCityFields,"expanded-keys":e.expandedKeys,"tree-data":e.allCity},on:{expand:e.onExpand,select:e.onSelect}})],1),e.monitorData?s("div",{staticClass:"middle-container"},[s("middleTree",{ref:"middleTree",attrs:{monitorData:e.monitorData,id:e.selectedKeys,selectId:e.selectId},on:{changeKeys:e.onChangeKeys,changeSelectMonitors:e.onChangeSelectMonitors}})],1):e._e(),e.monitorData?s("div",{staticClass:"right-container"},[s("rightTree",{attrs:{selectMonitors:e.selectMonitors},on:{cancelSelect:e.onCancelSelect}})],1):e._e()])},l=[],r=s(26166),c=s.n(r);const d=c().create();d.interceptors.response.use((e=>"200"!==e.data.code?Promise.reject(e.data.msg):e.data.data),(e=>Promise.reject(e)));var h=d,p={getTreeData(){return h.post("http://preview.shamiao.xyz/api/v1/exam/1/getAreaData")},getMonitorData(e){return h.post("http://preview.shamiao.xyz/api/v1/exam/1/getMonitorByAreaId",e)}},j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"middle-tree-container"},[s("div",{staticClass:"title-container"},[s("span",[e._v("带选择监控点")]),s("a-checkbox",{on:{change:e.onChange},model:{value:e.isContain,callback:function(t){e.isContain=t},expression:"isContain"}},[e._v(" 是否包含下级组织 ")])],1),s("div",{staticClass:"tree"},[s("a-tree",{attrs:{checkable:"","expanded-keys":e.expandedKeys,"replace-fields":e.replaceFields,"tree-data":e.monitorList},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1),1!==Math.ceil(e.page.total/e.page.pageSize)?s("div",{staticClass:"pagination-container"},[s("a-pagination",{attrs:{size:"small",total:e.page.total,"show-less-items":""},model:{value:e.page.pageNo,callback:function(t){e.$set(e.page,"pageNo",t)},expression:"page.pageNo"}})],1):e._e()])},g=[],u={name:"middleTree",props:{monitorData:Object,id:String,selectId:Object},created(){this.page.pageSize=this.monitorData.pageSize,this.page.pageNo=this.monitorData.pageNo,this.page.total=this.monitorData.total,this.list=this.monitorData.list,this.expandedKeys=[`all-${this.id}-${this.page.pageNo}`]},data(){return{replaceFields:{title:"name",key:"id"},expandedKeys:[],page:{pageNo:1,pageSize:10,total:0},list:null,isContain:!0,checkedKeys:[],flag:!1}},watch:{id:async function(){this.flag=!1,this.expandedKeys=[`all-${this.id}-${this.page.pageNo}`],this.isContain=!0,this.page.pageNo=1,await this._getMonitorData({pageNo:this.page.pageNo,pageSize:this.page.pageSize,id:this.id,isContain:this.isContain});const e=this.list.map((e=>e.id));let t=[];for(let s in this.selectId)t=[...t,...this.selectId[s]];t=Array.from(new Set(t)),this.checkedKeys=t.filter((t=>e.indexOf(t)>-1))},page:{async handler(){this.flag=!1,this.expandedKeys=[`all-${this.id}-${this.page.pageNo}`],await this._getMonitorData({pageNo:this.page.pageNo,pageSize:this.page.pageSize,id:this.id,isContain:this.isContain});const e=this.list.map((e=>e.id));let t=[];for(let s in this.selectId)t=[...t,...this.selectId[s]];t=Array.from(new Set(t)),this.checkedKeys=t.filter((t=>e.indexOf(t)>-1))},deep:!0},checkedKeys:{handler(e,t){const s=this.list.filter((e=>-1!==this.checkedKeys.indexOf(e.id)));let a=null;if(this.flag){const s=[...new Set([...t].filter((t=>e.indexOf(t)>-1)))];t.map((e=>{-1===s.indexOf(e)&&(a=e)}))}this.flag=!0,this.$emit("changeKeys",{id:`all-${this.id}-${this.page.pageNo}`,checkedKeys:this.checkedKeys.filter((e=>-1===e.indexOf("all")))},a),this.$emit("changeSelectMonitors",{id:`all-${this.id}-${this.page.pageNo}`,selectMonitors:s})}}},computed:{monitorList:{get(){return[{name:"监控点名称",id:`all-${this.id}-${this.page.pageNo}`,children:[...this.list]}]}}},methods:{async _getMonitorData(e){await p.getMonitorData(e).then((e=>{this.page.pageSize=e.pageSize,this.page.pageNo=e.pageNo,this.page.total=e.total,this.list=e.list}))},async onChange(){this.page.pageNo=1,await this._getMonitorData({pageNo:this.page.pageNo,pageSize:this.page.pageSize,id:this.id,isContain:this.isContain})},onCheck(e){this.checkedKeys=e},fun(){const e=this.list.map((e=>e.id));let t=[];for(let s in this.selectId)t=[...t,...this.selectId[s]];t=Array.from(new Set(t)),this.checkedKeys=t.filter((t=>e.indexOf(t)>-1))}}},f=u,m=s(1001),y=(0,m.Z)(f,j,g,!1,null,"5ef3208a",null),k=y.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"right-tree-container"},[s("div",{staticClass:"title"},[e._v(" 已选择监控点 ")]),s("div",{staticClass:"tree-container"},[s("a-tree",{attrs:{checkable:"","expanded-keys":e.expandedKeys,"tree-data":e.list,"replace-fields":e.replaceFields},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)])},x=[],b={name:"rightTree",props:{selectMonitors:Object},created(){this.expandedKeys=[]},watch:{selectMonitors:{handler(){let e=[];for(let s in this.selectMonitors)e=[...e,...this.selectMonitors[s]];const t=()=>{let t=new Map;for(let s of e)t.has(s.id)||t.set(s.id,s);return[...t.values()]};e=t(),this.list=[{id:"all",name:"监控点名称",children:[...e]}],this.checkedKeys=e.map((e=>e.id)),this.expandedKeys=["all"]},deep:!0},checkedKeys:{handler(e,t){let s=[];const a=[...new Set([...t].filter((t=>e.indexOf(t)>-1)))];t.map((e=>{-1===a.indexOf(e)&&s.push(e)})),this.$emit("cancelSelect",s)},deep:!0}},data(){return{expandedKeys:[],checkedKeys:[],replaceFields:{title:"name",key:"id"},list:null}}},C=b,K=(0,m.Z)(C,v,x,!1,null,"584d4478",null),z=K.exports,w={name:"checkComponents",async created(){await this._getTreeData(),this.selectedKeys=this.allCity[0].id,this.expandedKeys=[this.allCity[0].id],await this._getMonitorData({pageNo:1,pageSize:10,id:this.selectedKeys,isContain:!0})},components:{middleTree:k,rightTree:z},data(){return{replaceCityFields:{title:"name",key:"id"},autoExpandParent:!0,expandedKeys:[],selectedKeys:null,allCity:null,monitorData:null,checkedKeys:null,selectId:{},selectMonitors:[]}},methods:{async _getTreeData(){await p.getTreeData().then((e=>{this.allCity=e}))},async _getMonitorData(e){await p.getMonitorData(e).then((e=>{this.monitorData=e}))},async onSelect(e){this.selectedKeys=e[0],this.selectedKeys&&await this._getMonitorData({pageNo:1,pageSize:10,id:this.selectedKeys,isContain:!0})},onChangeKeys(e,t){this.selectId[e.id]=e.checkedKeys;let s={...this.selectId},a={};for(let i in s){let e=s[i],n=e.indexOf(t);n>-1&&e.splice(n,1),a[i]=e}this.selectId=a},onCancelSelect(e){let t={...this.selectId};if(e.length){let s={};for(let n of e)for(let e in t){let a=t[e],i=a.indexOf(n);i>-1&&a.splice(i,1),s[e]=a}this.selectId=s;let a={...this.selectMonitors},i={};for(let t of e)for(let e in a){let s=a[e],n=-1;s.forEach(((e,s)=>{e.id===t&&(n=s)})),n>-1&&s.splice(n,1),i[e]=s}this.selectMonitors=i,this.$refs.middleTree.fun()}},onChangeSelectMonitors(e){this.selectMonitors={...this.selectMonitors,[e.id]:e.selectMonitors}},onExpand(e){this.expandedKeys=e,this.autoExpandParent=!1}}},M=w,S=(0,m.Z)(M,o,l,!1,null,"137e62ca",null),O=S.exports,D={name:"App",components:{checkComponents:O}},_=D,N=(0,m.Z)(_,i,n,!1,null,null,null),$=N.exports,I=s(93878);s(58526);a.Z.config.productionTip=!1,a.Z.use(I.ZP),new a.Z({render:e=>e($)}).$mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var l=!0,r=0;r<a.length;r++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],l=a[1],r=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(r)var d=r(s)}for(t&&t(a);c<o.length;c++)n=o[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunktest"]=self["webpackChunktest"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(93617)}));a=s.O(a)})();
//# sourceMappingURL=app.f5a173b2.js.map